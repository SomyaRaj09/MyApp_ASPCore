<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="true"
      internalLogLevel="Warn"
       throwExceptions="true"
      internalLogFile="internal.txt">
  <targets>    
    <target xsi:type="Null" name="blackhole" />
    <target name="db"
        xsi:type="Database"
        dbProvider="System.Data.SqlClient"
        connectionString="Data Source=892-00005;Database=SpineLogging5;User Id=sa; password=aloha@123;"
        commandType="StoredProcedure"
        commandText="[dbo].[PROC_AddLog]"
        >      
      <parameter name="@in_logLevel"          layout="${level}" />
      <parameter name="@in_message"        layout="${event-properties:message}" />      
      <parameter name="@in_title"      layout="${event-properties:item=title}" />    
      <parameter name="@in_stacktrace"      layout="${event-properties:item=stacktrace}" />  
      <parameter name="@in_innerexception"      layout="${event-properties:item=innerexception}" />  
      <parameter name="@in_sessionid"         layout="${event-properties:item=sessionid}" />
      <parameter name="@in_staffid"         layout="${event-properties:item=staffid}" />
      <parameter name="@in_applicationidentifier"         layout="${event-properties:item=applicationidentifier}" />  
      <parameter name="@in_ipAddress"         layout="${event-properties:item=ipaddress}" />  
      <parameter name="@in_url"         layout="${event-properties:item=url}" />  
      <parameter name="@in_referrerUrl"         layout="${event-properties:item=referrerurl}" />  
      <parameter name="@in_headers"         layout="${event-properties:item=headers}" />  
      <parameter name="@in_moreInfo"         layout="${event-properties:item=moreinfo}" />  
    </target>
  </targets>
  <rules>
    <!--Skip Microsoft logs and so log only own logs-->
    <logger name="Microsoft.*" minlevel="Trace" writeTo="blackhole" final="true" />
    <logger name="*" minlevel="Info" writeTo="db"/>
  </rules>
</nlog>